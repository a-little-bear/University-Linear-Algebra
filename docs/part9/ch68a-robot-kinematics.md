# 第 68A 章 机器人运动学

<div class="context-flow" markdown>

**前置**：矩阵变换 (Ch67) · 矩阵群 (Ch55) · 广义逆 (Ch33) · 矩阵微积分 (Ch47A)

**本章脉络**：机器人连杆机构的代数抽象 $\to$ 正向运动学 (FK) 与 D-H 参数法 $\to$ 逆向运动学 (IK) 的代数挑战 $\to$ 机器人 Jacobian 矩阵 ($J$) $\to$ 速度变换与力矩传递 $\to$ 奇异性分析（$\det(J)=0$） $\to$ 指数积公式 (Product of Exponentials) $\to$ 冗余机器人的广义逆控制 $\to$ 应用：工业机械臂、仿人机器人关节规划、手术机器人

**延伸**：机器人运动学是线性变换在物理链条上的链式复合；它将关节空间的旋转/伸缩映射为末端执行器在笛卡尔空间的姿态，是现代自动化的几何核心

</div>

如何让机械臂精确地抓取一个杯子？这本质上是一个复杂的坐标变换问题。**机器人运动学**（Robot Kinematics）利用矩阵论来描述连杆与关节之间的几何关系。通过将每一段连杆的变换表示为一个 4x4 矩阵，我们可以通过简单的矩阵连乘计算出末端执行器的位置。本章将探讨这一从关节角度到空间坐标的代数映射。

---

## 68A.1 正向运动学与 D-H 参数

!!! definition "定义 68A.1 (正向运动学 FK)"
    计算从关节变量向量 $\theta$ 到末端执行器位姿 $T$ 的映射：$T = f(\theta)$。

!!! technique "Denavit-Hartenberg (D-H) 方法"
    通过四个参数（连杆长度 $a$、连杆转角 $\alpha$、连杆偏置 $d$、关节角 $\theta$）标准地描述相邻关节间的变换：
    $$A_i = \operatorname{Rot}_z(\theta_i) \operatorname{Trans}_z(d_i) \operatorname{Trans}_x(a_i) \operatorname{Rot}_x(\alpha_i)$$
    总变换矩阵为 $T_n^0 = A_1 A_2 \cdots A_n$。

---

## 68A.2 机器人 Jacobian 矩阵

!!! definition "定义 68A.2 (Jacobian 矩阵)"
    Jacobian 矩阵 $J(\theta)$ 描述了关节速度 $\dot{\theta}$ 与末端执行器线速度/角速度 $v$ 之间的线性关系：
    $$\mathbf{v} = J(\theta) \dot{\boldsymbol{\theta}}$$
    **意义**：它是运动学的微分形式，揭示了系统在当前姿态下的局部灵活性。

---

## 68A.3 奇异性分析

!!! theorem "定理 68A.1 (运动学奇异性)"
    当 $\det(J(\theta)) = 0$ 时，机器人处于**奇异姿态**。
    - 在该姿态下，机器人失去了在某些方向上运动的能力（秩亏损）。
    - 试图向这些方向运动会导致关节速度趋于无穷大，可能引发机械损坏。

---

## 68A.4 冗余性与广义逆控制

!!! technique "逆向运动学 (IK) 的代数解"
    对于给定的目标速度 $v$，关节速度的最小范数解由 **Moore-Penrose 伪逆**给出：
    $$\dot{\theta} = J^+ v + (I - J^+ J)z$$
    其中 $(I - J^+ J)z$ 代表了在不改变末端位姿的情况下调整关节形态的“零空间运动”。

---

## 练习题

1. **[基础] 两个转动关节的 2D 机械臂，末端坐标 $(x, y)$ 与关节角 $(\theta_1, \theta_2)$ 的关系。**

   ??? success "参考答案"
       $x = l_1 \cos\theta_1 + l_2 \cos(\theta_1+\theta_2)$
       $y = l_1 \sin\theta_1 + l_2 \sin(\theta_1+\theta_2)$

2. **[Jacobian] 计算上题 2D 臂的 Jacobian 矩阵。**

   ??? success "参考答案"
       $J = \begin{pmatrix} \frac{\partial x}{\partial \theta_1} & \frac{\partial x}{\partial \theta_2} \\ \frac{\partial y}{\partial \theta_1} & \frac{\partial y}{\partial \theta_2} \end{pmatrix} = \begin{pmatrix} -y & -l_2 \sin(\theta_1+\theta_2) \\ x & l_2 \cos(\theta_1+\theta_2) \end{pmatrix}$。

3. **[奇异性] 对于 2D 臂，当 $l_2 \sin\theta_2 = 0$ 时会发生什么？**

   ??? success "参考答案"
       此时 $\det(J) = 0$。机器人处于奇异状态（手臂完全伸直或完全折叠），无法产生沿手臂方向的径向分速度。

4. **[D-H参数] 为什么 D-H 方法中每个连杆只需要 4 个参数而非 6 个？**

   ??? success "参考答案"
       因为 D-H 坐标系选取满足特定约束（$x$ 轴与前一 $z$ 轴相交且垂直），消除了两个自由度，简化了模型。

5. **[逆向求解] 为什么逆向运动学通常比正向更难？**

   ??? success "参考答案"
       正向是唯一的代数连乘，而逆向涉及非线性方程组的求解，可能存在多解（多形态）、唯一解或无解（超出工作空间）。

6. **[工作空间] 什么是机器人的“可达工作空间”？**

   ??? success "参考答案"
       末端执行器所有可能到达的位置点的集合。在线性代数视角下，这是关节空间流形在算子 $f$ 下的像。

7. **[静力学] 关节力矩 $\tau$ 与末端作用力 $F$ 的代数关系。**

   ??? success "参考答案"
       $\tau = J^T F$。这展示了 Jacobian 的转置在虚功原理下的重要性。

8. **[冗余] 若一个 7 自由度机械臂在 3D 空间工作，其 Jacobian 矩阵的维度是多少？**

   ??? success "参考答案"
       $6 \times 7$（6 个速度分量，7 个关节变量）。由于列数多于行数，系统是冗余的。

9. **[PoE公式] 什么是指数积 (PoE) 公式？**

   ??? success "参考答案"
       基于螺旋理论 (Screw Theory) 的 FK 表示法：$T = e^{S_1 \theta_1} \cdots e^{S_n \theta_n} M$。相比 D-H，它更具几何直观且易于求导。

10. **[应用] 为什么在手术机器人中需要高精度的 IK 算法？**

   ??? success "参考答案"
        因为手术需要在狭窄空间内精确控制末端位置，任何微小的代数误差都可能导致医疗事故；同时需要利用冗余自由度避开人体组织。

## 本章小结

机器人运动学是线性代数与刚体几何的链式集成：

1.  **变换的累积**：它证明了复杂的机械运动在底层可以被解构为一系列局部 4x4 矩阵的级联，确立了运动建模的标准代数协议。
2.  **速度的切空间**：Jacobian 矩阵将非线性的空间配置映射为线性的速度矢量，为分析系统的灵活性与奇异性提供了精确的代数判据。
3.  **约束下的自由**：通过零空间与广义逆技术，运动学展示了如何在满足主任务（位姿）的同时利用剩余自由度优化次要目标（避障、节能），体现了线性代数在处理冗余约束时的优越性。

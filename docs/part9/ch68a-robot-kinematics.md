# 第 68A 章 机器人运动学

<div class="context-flow" markdown>

**前置**：齐次坐标 (Ch67) · 旋转矩阵 (Ch05) · 几何代数 (Ch50)

**本章脉络**：从自由度到位姿描述 $\to$ 旋转的表示：轴角、欧拉角与四元数 $\to$ 核心描述：Denavit-Hartenberg (DH) 参数化 $\to$ 正向运动学 (Forward Kinematics)：变换矩阵的级联乘法 $\to$ 逆运动学 (Inverse Kinematics) 的代数解析挑战 $\to$ 雅可比矩阵 (Jacobian Matrix) 与奇异位姿 $\to$ 微分运动：从速度空间到力空间 $\to$ 应用：工业机械臂轨迹规划、手术机器人、仿人机器人步态分析

**延伸**：机器人运动学是线性代数的“动态拓扑”；它将机械结构的物理约束转化为矩阵流形上的连续运动，证明了末端执行器的精确控制本质上是解一系列高度耦合的非线性矩阵方程，是实现具身智能的数学基石

</div>

在机器人学中，每一个关节的转动都对应着一个局部坐标系的变换。**机器人运动学**（Robot Kinematics）的核心任务是建立关节角度（内变量）与末端工具位姿（外变量）之间的精确数学映射。利用**齐次变换矩阵**的级联，我们可以像搭积木一样描述极其复杂的机械链。本章将介绍这一作为工业自动化与精密制造底层的运动几何学。

---

## 68A.1 位姿描述与 DH 参数

!!! definition "定义 68A.1 (位姿矩阵)"
    机器人末端在基坐标系下的位姿由一个 $4 \times 4$ 矩阵 $T$ 描述：
    $$T = \begin{pmatrix} R & \mathbf{p} \\ 0 & 1 \end{pmatrix}$$
    其中 $R$ 代表姿态旋转，$\mathbf{p}$ 代表空间位置。

!!! technique "技术：DH 参数化"
    通过四个参数（连杆长度 $a$、连杆转角 $\alpha$、连杆偏距 $d$、关节角 $\theta$），可以将相邻两个关节的变换唯一地表示为一个矩阵 $A_i$。

---

## 68A.2 正向与逆向运动学

!!! theorem "定理 68A.1 (运动学基本方程)"
    **正向运动学 (FK)**：通过计算 $T = A_1 A_2 \cdots A_n$ 唯一确定末端位置。
    **逆向运动学 (IK)**：给定 $T$ 求解关节向量 $\mathbf{q} = (\theta_1, \ldots, \theta_n)$。
    **性质**：FK 是映射，IK 是反映射（通常具有多解性或无解）。

---

## 68A.3 雅可比矩阵与速度

!!! definition "定义 68A.2 (机器人雅可比矩阵 $J$)"
    建立关节速度 $\dot{\mathbf{q}}$ 与末端速度 $\mathbf{v}$ 之间的线性映射：
    $$\mathbf{v} = J(\mathbf{q}) \dot{\mathbf{q}}$$
    **奇异位姿**：当 $\det(J) = 0$ 时，机器人失去某些方向的运动能力。

---

## 练习题

**1. [基础] 写出绕 $x$ 轴旋转 $\alpha$ 并沿 $x$ 轴平移 $a$ 的 DH 变换矩阵。**

??? success "参考答案"
    **构造：**
    根据 DH 规则，这是一个复合变换。
    $A = \operatorname{Rot}(x, \alpha) \operatorname{Trans}(x, a)$。
    **结论**：$\begin{pmatrix} 1 & 0 & 0 & a \\ 0 & \cos\alpha & -\sin\alpha & 0 \\ 0 & \sin\alpha & \cos\alpha & 0 \\ 0 & 0 & 0 & 1 \end{pmatrix}$。

**2. [计算] 若两连杆机械臂长度均为 1，关节角分别为 0 和 90 度。求末端坐标。**

??? success "参考答案"
    **几何推导：**
    1. 第一段沿 $x$ 轴延伸 1 个单位。
    2. 第二段相对于第一段转 90 度，即沿 $y$ 轴延伸 1 个单位。
    3. 总坐标 $x = 1 + 0 = 1, y = 0 + 1 = 1$。
    **矩阵验证**：计算 $T = \operatorname{Rot}_z(0)\operatorname{Trans}_x(1) \cdot \operatorname{Rot}_z(90^\circ)\operatorname{Trans}_x(1)$ 也能得到相同结果。

**3. [逆运动学] 解释为什么 6 自由度机械臂通常有 8 组逆解。**

??? success "参考答案"
    **代数背景：**
    1. 逆运动学涉及解一组耦合的三角函数方程。
    2. 每一个“肩部”、“肘部”和“腕部”配置都存在两种对称形式（如左手系/右手系，肘部向上/向下）。
    3. $2 \times 2 \times 2 = 8$。
    **结论**：这体现了非线性映射在全局上的多值性。

**4. [雅可比] 雅可比矩阵的列向量在几何上代表什么？**

??? success "参考答案"
    **结论：**
    第 $i$ 列代表当只有第 $i$ 个关节运动时，末端执行器产生的速度向量。
    对于转动关节，它是对应关节轴线与末端连线的外积。

**5. [奇异性] 判定：当机械臂完全伸直时，是否处于奇异位姿？**

??? success "参考答案"
    **是的。**
    **理由**：在伸直状态下，机械臂无法沿径向继续向外移动（即该方向速度分量始终为 0）。
    这在代数上表现为雅可比矩阵不满秩，其特征值中出现了 0。

**6. [应用] 简述“伪逆控制”在冗余机器人中的作用。**

??? success "参考答案"
    如果机器人自由度大于 6（冗余），方程 $v = J \dot{q}$ 有无穷多解。
    利用 **Moore-Penrose 伪逆** $J^+$，可以求得 $\dot{q} = J^+ v$。
    这保证了在满足末端运动的同时，关节的能耗（范数）最小。

**7. [四元数] 为什么在轨迹规划中使用四元数插值（SLERP）优于旋转矩阵线性插值？**

??? success "参考答案"
    **理由：**
    旋转矩阵的线性组合通常不再是正交阵（会产生畸变）。
    四元数插值在 4 维单位球面上沿着测地线移动，保证了旋转角度的变化是匀速的，且始终保持旋转的合法性（见 Ch51）。

**8. [计算] 两个坐标系 $A$ 和 $B$ 之间满足 $T_B^A$，若在 $B$ 系下观察到点 $P^B$，求 $P^A$。**

??? success "参考答案"
    **公式：**
    $P^A = T_B^A P^B$（使用齐次坐标）。
    这展示了线性代数如何通过坐标变换统一不同参考系下的观测数据。

**9. [对偶性] 雅可比矩阵的转置 $J^T$ 在力学中有什么作用？**

??? success "参考答案"
    **结论：静力学映射。**
    公式 $\boldsymbol{\tau} = J^T \mathbf{f}$ 将末端受到的外部力 $\mathbf{f}$ 映射为关节所需的力矩 $\boldsymbol{\tau}$。
    这体现了速度空间与力空间之间的对偶性（功的等效）。

**10. [应用] 简述“视觉伺服”中图像雅可比矩阵的意义。**

??? success "参考答案"
    图像雅可比矩阵建立了“摄像头运动”与“图像特征点移动”之间的关系。通过求该矩阵的逆，机器人可以根据图像中的偏差自动算出电机的修正补偿量，实现闭环控制。

## 本章小结

机器人运动学是线性代数向物理空间的“具身化”：

1.  **链式的逻辑**：通过矩阵级联，复杂的机械拓扑被简化为算子的连续复合，确立了描述多连杆系统的通用代数范式。
2.  **速度的微分视角**：雅可比矩阵证明了局部的线性化是理解全局运动的关键，确立了速度、力矩与奇异性分析的统一框架。
3.  **逆向的挑战**：逆运动学的多解性与非线性映射揭示了从“任务空间”回到“关节空间”的本质难度，驱动了现代几何代数与数值优化算法的不断突破。
